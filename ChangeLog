2006-12-29  Hynek Hanke  <hanke@brailcom.org>

	* src/ttsapi/structures.py (AudioEvent): New structure.
	(VoiceDescription._attributes): Minor fixes.

	* src/ttsapi/server.py (TCPConnection): Expanded according
	to TTS API docs.
	(TCPConnection.__init__): New error defined DriverError.
	Improved debugging.

	* src/ttsapi/errors.py (_CommunicationError): New exception.
	(_CommunicationError): New exception.
	(ErrorDriverNotLoaded): New exception.
	(ErrorRetrievalSocketNotInitialized): New exception.

	* src/ttsapi/connection.py (parse_list): Moved out from Connection.
	(SocketConnection.__init__): Initialize logger.
	(SocketConnection.read_data): New method.
	(PipeConnection.NEWLINE): Newline changed to \r\n !!!
	(PipeConnection._write): flush.

	* src/ttsapi/client.py (_CommunicationError): Moved to errors.py
	(TCPConnection): Other changes/updates.

	* src/provider/server.py (audio_event_delivery): New function.
	(main): Init audio system.
	(main): Start new thread for each client.

	* src/provider/provider.py: import subprocess
	(Driver): New class.
	(Provider.__init__): Load drivers.
	(Provider.driver_capabilities): Playback emulation via retrieval.
	(Provider._new_message_id): New method.
	(Provider.say_text): Basic SSML emulation for input in plain text.
	(Provider): Basic functionality implemented.
	(Provider.set_message_id): New method.

	* src/provider/logs.py (Logging.init_stage2): Don't create
	the log object.

	* src/provider/events.py: New file. Events handling.

	* src/provider/festival.py: Basic driver functionality
	completed.

	* src/provider/driver.py: import audio.
	(RetrievalSocket.host): _host, _port renamed to host, port.
	(RetrievalSocket.__init__): open renamed to _init_
	(RetrievalSocket.send_data_block): Removed '=' signs from audio
	description block.
	(RetrievalSocket.send_data_block): Construct event list.
	Handling of events modified (see diff).
	(main_loop): Log formatter changed to include threadName.
	(main_loop): Comments.

	* src/provider/configuration.py (Configuration._conf_options): New
	options: audio_port, available_drivers, default_driver.
	(Configuration.__init__): Initialize logger.
	(Configuration.__init__): Don't create configuration.

	* src/provider/audio.py: New file. Audio susbsystem.

2006-10-29  Hynek Hanke  <hanke@brailcom.org>

	* src/provider/server.py (main): threading used instead of thread to
	invoke provider threads.

	* (): MANY changes not logged in here because they constitute
	entirely new code or bigger rewrites in these early
	stages.
	
	* src/provider/logs.py (Logging.set_prefix): New method.

2006-08-21  Hynek Hanke  <hanke@brailcom.org>

	* src/ttsapi/structures.py (Structure.attributes_dictionary):
	Bugfix.
	(_attributes): Fixes in attributes list.
	(VoiceDescription): VoiceDescription is now a Structure.
	(VoiceDescription._attributes): Removed default values, all are
	now None.

	* src/ttsapi/server.py (TCPConnection.__init__): Added missing reply
	tuples into self.commands_map.
	(TCPConnection.__init__): Added definitions for SAY TEXT * commands.
	(TCPConnection._list_drivers_reply): New function.
	(TCPConnection._list_voices_reply): New function.
	(TCPConnection._driver_capabilities_reply): Bugfix.
	(TCPConnection._driver_capabilities_reply): Handle nested lists correctly.
	(TCPConnection.process_input): SAY TEXT * commands handling reworked.

	* src/ttsapi/connection.py (Connection._arg_to_str): Put quotes
	around strings that include spaces.
	(PipeConnection.__init__): logger argument added.

	* src/provider/provider.py (Provider.init): New method.
	(driver_capabilities): driver_id argument removed.
	(Provider.voices): driver_id argument removed.

	* src/provider/festival.py: New file -- festival driver.

	* src/provider/driver.py: New file -- python driver base classes.
2006-08-09  Hynek Hanke  <hanke@brailcom.org>

	* src/ttsapi/structures.py: Correct FSF address.

	* src/ttsapi/server.py (ClientGone): New exception.
	(TCPConnection._quit): New method.
	(TCPConnection.__init__): New parameter 'logger'. Log
	communication.
	(TCPConnection.__init__): Typos in self.commands_map.
	(TCPConnection.__init__): self.errors_map : new variable.
	(TCPConnection._cmd_matches): Docstring.
	(TCPConnection._report_error): New method.
	(TCPConnection.process_input): Exception handling through
	self.errors_map.

	* src/ttsapi/errors.py: New file.

	* src/ttsapi/connection.py (SocketConnection.__init__): Added the 'logger' parameter and logging of communication.

	* src/ttsapi/client.py: Correct FSF address.

	* src/ttsapi/__init__.py: New file.

	* src/provider/server.py: Use the configuration class.
	(serve_client): Implementation over sockets.
	(main): Initialize logging, bind socket, wait for
	connections and start new threads.

	* src/provider/provider.py: Import errors.

	*  src/provider/configuration.py: New file.

	* doc/tts-api-provider.texi (Speech Synthesis Commands (text protocol)): Error codes changed.

2006-07-26  Hynek Hanke  <hanke@brailcom.org>

	* src/ttsapi/errors.py: New file.

2006-07-25  Hynek Hanke  <hanke@brailcom.org>

	* Modules structure changed.

2006-07-21  Hynek Hanke  <hanke@brailcom.org>

	* doc/tts-api-provider.texi (Introduction): Newly written.

2006-07-03  Hynek Hanke  <hanke@chopin>

	* src/api/python/ttsapi.py: Implementation of python->text protocol
	interface.

	* src/api/python/tcp_connection.py: Moved from tcp_connection.py.
	
	* src/api/python/tcp_connection.py: Moved to connection.py.

	* doc/tts-api-provider.texi (Driver Discovery (text protocol)):
	Definition of reply changed.Groups of capabilities forming sets
	are now written as sets.

	* Minor rewording of some commands and attributes to sound more
	natural (set rate relative -> set relative rate)

2006-05-27  Hynek Hanke  <hanke@chopin>

	* Initial version containing first documentation including
	description of text protocol version of TTS API and design draft.
	Python version of TTS API is included in src/api/python/.

